playbook_repos: {}
sinks_config:
    - robusta_sink:
        name: robusta_ui_sink
        token: ENC[AES256_GCM,data:kdr59aCM611It1P5LZDZOVIZBGEir9UAxsEp2QG15DuKjj5+KpqFwj00tbZgfe55TGaqCttXI634UXbnTQMYLoeqt9/Urtl+WIgE84AZl1BeQj/qraHKaUVn7+g+B2waja3VHKNLG1o99uHOOIwZg2Nn5mc2AMBmtsl7ivQIEQiy8nickiRz6U1mOZVaGvy1NEQ5W14rwP9lvyDj/P5KQQ4n0kqDCYMLHP0oDrbHL3WIBLNrdVtDeuKkkIJYD8y/pw1rWoqvqZvdUlVPISp450QzOKeaF4G60zLB4DQIEu8zpMWLCvjMgb0OA2SH1qOBUuoUpisEobG13OV1WeVodHdS5KI0DRqRO8HwaY0ob8Jz1cnBnmH+u0XYPXRy/Iqe5h2+kLu6YuK3rwqt1ThPsCf6SgDZ0CZhKwk+wh+Bh4peBcpXUx/vBBpuf3vsPE+5ugWd+DU2aBU+cgSQQYr1qVJ4dreD6jEjeTrBxSoWb6+Csn6zTcqEnaBBrSaHk49DjrfDjBxk+ESx9C5AX6SRNgzJTwXeak6+xda8x0UDjn7p3rwQMOto51FaFLkS3aq1Kvh3FngDj1PhDabCsvrnUMUUkiBfyb/GYOzhyMWt2Oak6ddf3/oQx1INLhz/UZY+6yJnoK0w3RPPLAHlYIzgZh+/s2Y=,iv:yMwDHB1yFXz4oJE8O5wH2adCIClenW0sy/Dy+oYqrn8=,tag:S5xz84nT3N/ALAL61563RQ==,type:str]
global_config:
    cluster_name: cedi-dev
    account_id: ENC[AES256_GCM,data:ALYXR3s0tjpihECdZzyqEEZnwGoc26reirP90/FzLOj4f313,iv:3+ElkeEZEnBF6OwIsDIuZeqwJIosaSgLEzTzKbiXFtg=,tag:zp3jzouJ0tNObznw8AReaw==,type:str]
    signing_key: ENC[AES256_GCM,data:U5D8DRQ7bUKFZSdGyAsPJ5+rS2hVWLOsFunZuC5Rn6CFNlwP,iv:ZRnXBrbLe+DDmyNoNe9WwQ4/3QScuhO/gUx2hsrNz6k=,tag:CnSC9hYXAUslguVSMBf95g==,type:str]
    check_prometheus_flags: true
    custom_annotations: []
    grafana_api_key: ""
    grafana_dashboard_uid: ""
    grafana_url: grafana.cedi.dev
    alertmanager_url: prom-stack-alertmanager.monitoring.svc.cluster.local:9093
    prometheus_url: prom-stack-prometheus.monitoring.svc.cluster.local:9090
alert_relabel: []
light_actions:
    - related_pods
    - prometheus_enricher
    - add_silence
    - delete_pod
    - delete_silence
    - get_silences
    - logs_enricher
    - pod_events_enricher
    - deployment_events_enricher
    - job_events_enricher
    - job_pod_enricher
    - get_resource_yaml
    - node_cpu_enricher
    - node_disk_analyzer
    - node_running_pods_enricher
    - node_allocatable_resources_enricher
    - node_status_enricher
    - node_graph_enricher
    - oomkilled_container_graph_enricher
    - pod_oom_killer_enricher
    - oom_killer_enricher
    - volume_analysis
    - python_profiler
    - pod_ps
    - python_memory
    - debugger_stack_trace
    - python_process_inspector
    - prometheus_alert
    - create_pvc_snapshot
    - resource_events_enricher
    - delete_job
    - list_resource_names
    - node_dmesg_enricher
    - status_enricher
    - popeye_scan
    - krr_scan
    - handle_alertmanager_event
    - drain
    - cordon
    - uncordon
    - rollout_restart
    - prometheus_all_available_metrics
    - prometheus_get_series
active_playbooks:
    - actions:
        - name_silencer:
            names:
                - Watchdog
                - KubeSchedulerDown
                - KubeControllerManagerDown
                - InfoInhibitor
      triggers:
        - on_prometheus_alert:
            status: all
    - actions:
        - name_silencer:
            names:
                - etcdInsufficientMembers
                - etcdMembersDown
                - NodeClockNotSynchronising
                - PrometheusTSDBCompactionsFailing
      triggers:
        - on_prometheus_alert:
            k8s_providers:
                - Minikube
                - Kind
                - RancherDesktop
            status: all
    - actions:
        - name_silencer:
            names:
                - KubeletDown
      triggers:
        - on_prometheus_alert:
            k8s_providers:
                - GKE
            status: all
    - actions:
        - silence_alert:
            log_silence: true
      triggers:
        - on_prometheus_alert:
            alert_name: CPUThrottlingHigh
            k8s_providers:
                - DigitalOcean
            pod_name_prefix: do-node-agent
    - actions:
        - target_down_dns_silencer: {}
      triggers:
        - on_prometheus_alert:
            alert_name: TargetDown
    - actions:
        - report_crash_loop: {}
      triggers:
        - on_pod_crash_loop:
            restart_reason: CrashLoopBackOff
    - actions:
        - image_pull_backoff_reporter: {}
      triggers:
        - on_image_pull_backoff: {}
    - actions:
        - pod_oom_killer_enricher:
            attach_logs: true
        - pod_node_graph_enricher:
            resource_type: Memory
        - oomkilled_container_graph_enricher:
            resource_type: Memory
      stop: true
      triggers:
        - on_pod_oom_killed:
            rate_limit: 3600
    - actions:
        - logs_enricher: {}
        - pod_events_enricher: {}
      triggers:
        - on_prometheus_alert:
            alert_name: KubePodCrashLooping
    - actions:
        - prometheus_rules_enricher: {}
        - logs_enricher:
            filter_regex: .*Evaluating rule failed.*
      triggers:
        - on_prometheus_alert:
            alert_name: PrometheusRuleFailures
    - actions:
        - cpu_overcommited_enricher: {}
        - external_video_enricher:
            name: CPU Overcommited
            url: ENC[AES256_GCM,data:GcbfKm3h8BUMFU+NPqQMdvYyNTGVCV3hAzK8jsw=,iv:Jvbs/7qjUYz9im/xCvIUJYPsAegHNdROOp/hPR4Tvgw=,tag:MFtRKAzstTNGIlFBOOEbXQ==,type:str]
      triggers:
        - on_prometheus_alert:
            alert_name: KubeCPUOvercommit
    - actions:
        - memory_overcommited_enricher: {}
        - external_video_enricher:
            name: Memory Overcommited
            url: ENC[AES256_GCM,data:YxH42iJoMpz7Ysm6m/gH9KkuUDUKuqnJShb6U3nJKWY=,iv:zsqOEJpxYIBwswMHdq/2TYQtLvv3A3vqRqLY7RQk8oI=,tag:xHd4A/qOXlcq/b82EhgC6A==,type:str]
      triggers:
        - on_prometheus_alert:
            alert_name: KubeMemoryOvercommit
    - actions:
        - logs_enricher: {}
        - pod_events_enricher: {}
        - pod_issue_investigator: {}
      triggers:
        - on_prometheus_alert:
            alert_name: KubePodNotReady
    - actions:
        - pod_issue_investigator: {}
        - pod_events_enricher: {}
      triggers:
        - on_prometheus_alert:
            alert_name: KubeContainerWaiting
    - actions:
        - hpa_mismatch_enricher: {}
      triggers:
        - on_prometheus_alert:
            alert_name: KubeHpaReplicasMismatch
    - actions:
        - job_info_enricher: {}
        - job_events_enricher: {}
        - job_pod_enricher: {}
      triggers:
        - on_prometheus_alert:
            alert_name: KubeJobFailed
        - on_prometheus_alert:
            alert_name: KubeJobCompletion
        - on_prometheus_alert:
            alert_name: KubeJobNotCompleted
    - actions:
        - api_service_status_enricher: {}
      triggers:
        - on_prometheus_alert:
            alert_name: KubeAggregatedAPIDown
    - actions:
        - node_pods_capacity_enricher: {}
        - alert_explanation_enricher:
            alert_explanation: The node is approaching the maximum number of scheduled pods.
            recommended_resolution: Verify that you defined proper resource requests for your workloads. If pods cannot be scheduled, add more nodes to your cluster.
      triggers:
        - on_prometheus_alert:
            alert_name: KubeletTooManyPods
    - actions:
        - node_allocatable_resources_enricher: {}
        - node_running_pods_enricher: {}
        - status_enricher:
            show_details: true
        - node_dmesg_enricher: {}
      triggers:
        - on_prometheus_alert:
            alert_name: KubeNodeNotReady
    - actions:
        - resource_events_enricher: {}
        - node_status_enricher: {}
      triggers:
        - on_prometheus_alert:
            alert_name: KubeNodeUnreachable
    - actions:
        - resource_events_enricher:
            dependent_pod_mode: true
        - statefulset_replicas_enricher: {}
        - pod_issue_investigator: {}
      triggers:
        - on_prometheus_alert:
            alert_name: KubeStatefulSetReplicasMismatch
    - actions:
        - related_pods: {}
        - statefulset_replicas_enricher: {}
      triggers:
        - on_prometheus_alert:
            alert_name: KubeStatefulSetUpdateNotRolledOut
    - actions:
        - resource_events_enricher: {}
        - related_pods: {}
        - daemonset_status_enricher: {}
      triggers:
        - on_prometheus_alert:
            alert_name: KubeDaemonSetRolloutStuck
    - actions:
        - daemonset_status_enricher: {}
        - daemonset_misscheduled_analysis_enricher: {}
      triggers:
        - on_prometheus_alert:
            alert_name: KubernetesDaemonsetMisscheduled
        - on_prometheus_alert:
            alert_name: KubeDaemonSetMisScheduled
    - actions:
        - node_cpu_enricher: {}
        - alert_graph_enricher:
            item_type: Node
            resource_type: CPU
      triggers:
        - on_prometheus_alert:
            alert_name: HostHighCpuLoad
    - actions:
        - oom_killer_enricher: {}
        - alert_graph_enricher:
            item_type: Node
            resource_type: Memory
      triggers:
        - on_prometheus_alert:
            alert_name: HostOomKillDetected
    - actions:
        - node_disk_analyzer: {}
        - alert_graph_enricher:
            item_type: Node
            resource_type: Disk
      triggers:
        - on_prometheus_alert:
            alert_name: NodeFilesystemSpaceFillingUp
        - on_prometheus_alert:
            alert_name: NodeFilesystemAlmostOutOfSpace
    - actions:
        - cpu_throttling_analysis_enricher: {}
        - alert_graph_enricher:
            item_type: Pod
            resource_type: CPU
      triggers:
        - on_prometheus_alert:
            alert_name: CPUThrottlingHigh
            status: all
    - actions:
        - pod_issue_investigator: {}
        - deployment_events_enricher:
            included_types:
                - Warning
        - deployment_events_enricher:
            dependent_pod_mode: true
            included_types:
                - Warning
                - Normal
      triggers:
        - on_prometheus_alert:
            alert_name: KubernetesDeploymentReplicasMismatch
        - on_prometheus_alert:
            alert_name: KubeDeploymentReplicasMismatch
    - actions:
        - default_enricher: {}
      triggers:
        - on_prometheus_alert:
            status: all
    - actions:
        - alert_explanation_enricher:
            alert_explanation: This alert is fired when the file system is running out of space.
            recommended_resolution: This is a common issue on local clusters and we recommend increasing the node disk size for your cluster to run optimally.
      triggers:
        - on_prometheus_alert:
            alert_name: NodeFilesystemSpaceFillingUp
            k8s_providers:
                - Minikube
                - Kind
                - RancherDesktop
        - on_prometheus_alert:
            alert_name: NodeFilesystemAlmostOutOfSpace
            k8s_providers:
                - Minikube
                - Kind
                - RancherDesktop
    - actions:
        - event_report: {}
        - event_resource_events: {}
      sinks:
        - robusta_ui_sink
      triggers:
        - on_kubernetes_warning_event_create:
            exclude:
                - NodeSysctlChange
    - actions:
        - resource_babysitter: {}
      sinks:
        - robusta_ui_sink
      triggers:
        - on_kubernetes_resource_operation:
            resources:
                - deployment
                - daemonset
                - statefulset
    - actions:
        - resource_babysitter: {}
        - customise_finding:
            aggregation_key: IngressChange
            title: Ingress Changes
      sinks:
        - robusta_ui_sink
      triggers:
        - on_ingress_all_changes: {}
    - actions:
        - create_finding:
            aggregation_key: job_failure
            title: Job Failed
        - job_info_enricher: {}
        - job_events_enricher: {}
        - job_pod_enricher: {}
      sinks:
        - robusta_ui_sink
      triggers:
        - on_job_failure: {}
    - actions:
        - popeye_scan: {}
      sinks:
        - robusta_ui_sink
      triggers:
        - on_schedule:
            fixed_delay_repeat:
                repeat: 1
                seconds_delay: 120
    - actions:
        - krr_scan: {}
      sinks:
        - robusta_ui_sink
      triggers:
        - on_schedule:
            cron_schedule_repeat:
                cron_expression: 0 12 * * 1
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1r9chn8pl3d4msxktw457x3xz2l8p04pwuyd7pkgldkmkakras5ks7tfsyq
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBjLzlkdW5Ib3BqRE85dWV0
            Qkppc0loOE1KWHJHL0JUcHlua3d4dGJNeWxnCm5CdEhiM1BQdm5QdEdLNnRWNnVM
            MnlLQlRKUUlJd1MzTVlXK1c2YkhaNncKLS0tIEpTQUNKNWZXY2xGYXI0NmV5amNI
            SGtUcUhVWHJjRjNPWTh1MTk5K0grdGcKfmYGnp3ERYl7KxGU5i2fQj9yZwZqMUJk
            eReWauT5U72U3hjDXhE0or0feIsD+G0qGmSbbQZzM0Xm9RsWkqdPQg==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age10hzpv26wext204acftvf2n8r6hmnnwxdpkngzaysllpwynccjvjsjvhq4z
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA3ODdtRzUyTUczRDQ4eWZx
            eWQvSTVhL3dYNVM0c041OFNFdUhreUJhQzM4CllTQWJOOTF1MjBFV2hERGN3RU5P
            c2grV3hUT0toQkJEbE1UcFFiS1lLMDQKLS0tIGNTaWhvams2UFVpbE9zQ0c2YWNw
            UGJVSnY0SURPaXJhMG5za3lQWUR6MlUKTT1BL5U6nErvKu3Pb2yxW8U49oQtOaSr
            cdZWRVmDzwstmD5t61nyDEdQbVVWsspI/1BWAPHjvjd6fUebe//SpQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1l4lhmkmvr4lype9x4dm3y9lxk2uekqwwj65mp4c36tnph6ytfakqesnats
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBBSEFBclQ0RlhtQ3RoRnZE
            VVA3OXVpK08wSS9zVTIza2Ezbnk2WXpRWlhNCkxRRjNVN0tvWWpPZXVTdlJoOHFH
            d05yNEdxcmxISlFlYnlDcjhTU200d3cKLS0tIFh6RG04enFxRkpCaGRzRW5TWnph
            WkpzVldrdVd2Wk1jOEVEWDBtMkRKbEEKwi1Qi0fzB2+Cxd84UAVB5hvz+0qpOP0p
            wLP1VOX9PbditJ5M5hAaqg5WQjQodNh7WnFeG98f7L7SE+qfmrwzJw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-09-22T14:32:55Z"
    mac: ENC[AES256_GCM,data:whhS0UDaheUpqyU2f94sOEUHjuFsbsvRf/7MXBEu3ifOolx9PyJf5lVfKRDPGDPTdVSstgHJz/3hV8WFY9j1oTKGhcFK7AJFpmKaUd4qNxCKNhU+O6IFgTt4g4WE7qUbhCDXs4FlBCRgobBJfV5IWjd7/3GzgLF6zizHeWUONVs=,iv:Rf0CxtypECvXmUjRxrhv4fODdRWdrGNUN7FCOtxkjFw=,tag:qo0y8X89W4Q9JtccwSFEbA==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|spec|bot_token|chat_id|url|token|signing_key|account_id)$
    version: 3.8.1
