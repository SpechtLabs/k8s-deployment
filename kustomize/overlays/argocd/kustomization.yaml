apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: argocd

bases:
  - ../../bases/argocd/

generators:
  - ./secret-generator.yaml

patchesJson6902:
  - target:
      kind: Deployment
      namespace: argocd
      name: argocd-server
    path: argo-server-sidecar.patch.yaml
  - target:
      kind: Deployment
      namespace: argocd
      name: argocd-repo-server
    path: repo-server-sidecar.patch.yaml
  - target:
      kind: StatefulSet
      namespace: argocd
      name: argocd-application-controller
    path: app-controller.patch.yaml
  - target:
      kind: Role
      namespace: argocd
      name: argocd-repo-server
    path: role-repo-server.patch.yaml
  - target:
      kind: Role
      namespace: argocd
      name: argocd-server
    path: webterminal-role.patch.yaml
